<!DOCTYPE html>
<html>
  <head>
    <title>Go Crawler</title>
    <!-- 1. Load platform support before any code that touches the DOM. -->
    <script src="bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <script src="js/sigma.min.js"></script>
    <script src="js/sigma.parsers.json.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Roboto">
    <!-- 2. Load the component using an HTML Import -->
    <link rel="import" href="bower_components/paper-input/paper-input.html">
    <link rel="import" href="bower_components/core-header-panel/core-header-panel.html">
    <link rel="import" href="bower_components/core-toolbar/core-toolbar.html">
    <link rel="import" href="bower_components/paper-button/paper-button.html">
    <link rel="import" href="bower_components/ajax-form/ajax-form.html">
    <link rel="stylesheet" type="text/css" href="css/layout.css">
  </head>
  <body>
    <core-header-panel flex>
      <core-toolbar>
        <div>
          Go Crawler
        </div>
      </core-toolbar>
      <div class="main">
        <form is="ajax-form" action="send" method="post" enctype="application/json">
          <paper-input name="url" label="Crawl this url" floatingLabel></paper-input>
          <div id="button"><paper-button raised id="submitButton">Submit</paper-button></div>
          <script>
            document.getElementById('submitButton').addEventListener('click', function() {
            document.forms[0].submit();
            });

            document.forms[0].addEventListener('submitted', function(event) {
              var data = event.detail.responseText;
              console.log(data);
              s = new sigma({ 
                      graph: data,
                      container: 'container',
                      settings: {
                          defaultNodeColor: '#ec5148'
                      }
              });
              s.refresh()
            });
          </script>
        </form>
      </div>
      </core-header-panel>
      <div id='container'></div>
  </body>
</html> 